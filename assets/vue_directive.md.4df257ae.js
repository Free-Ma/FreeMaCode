import{_ as s,c as n,o as a,a as l}from"./app.08516853.js";const C=JSON.parse('{"title":"\u9700\u6C42","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u5B9E\u73B0\u65B9\u6848","slug":"\u5B9E\u73B0\u65B9\u6848"},{"level":3,"title":"\u65B9\u6848\u4E00","slug":"\u65B9\u6848\u4E00"},{"level":3,"title":"\u65B9\u6848\u4E8C","slug":"\u65B9\u6848\u4E8C"}],"relativePath":"vue/directive.md"}'),p={name:"vue/directive.md"},o=l(`<h1 id="\u9700\u6C42" tabindex="-1">\u9700\u6C42 <a class="header-anchor" href="#\u9700\u6C42" aria-hidden="true">#</a></h1><p>\u4E3A\u4E86\u4F18\u5316\u7528\u6237\u4F53\u9A8C:</p><ul><li><p>\u5F53\u9875\u9762\u52A0\u8F7D\u6570\u636E\u65F6, \u663E\u793A <code>loading...</code> \u7684\u4FE1\u606F\u8BA9\u7528\u6237\u77E5\u9053\u6B63\u5728\u52A0\u8F7D</p></li><li><p>\u5F53\u83B7\u53D6\u4E0D\u5230\u6570\u636E\u7684\u65F6\u5019, \u901A\u8FC7\u663E\u793A<strong>\u672A\u83B7\u53D6\u5230\u6570\u636E</strong>\u7684\u63D0\u793A\u4FE1\u606F\u544A\u77E5\u7528\u6237</p></li></ul><h2 id="\u5B9E\u73B0\u65B9\u6848" tabindex="-1">\u5B9E\u73B0\u65B9\u6848 <a class="header-anchor" href="#\u5B9E\u73B0\u65B9\u6848" aria-hidden="true">#</a></h2><h3 id="\u65B9\u6848\u4E00" tabindex="-1">\u65B9\u6848\u4E00 <a class="header-anchor" href="#\u65B9\u6848\u4E00" aria-hidden="true">#</a></h3><p>\u5F00\u53D1\u4E24\u4E2A\u5168\u5C40\u7EC4\u4EF6</p><p><strong>\u4F7F\u7528\u65B9\u5F0F</strong>: \u624B\u52A8\u5F15\u5165\u7EC4\u4EF6 \u5199 <code>dom</code></p><h3 id="\u65B9\u6848\u4E8C" tabindex="-1">\u65B9\u6848\u4E8C <a class="header-anchor" href="#\u65B9\u6848\u4E8C" aria-hidden="true">#</a></h3><p>\u81EA\u5B9A\u4E49\u6307\u4EE4</p><p>\u5B9E\u73B0\u539F\u7406\uFF1A\u628A\u7EC4\u4EF6\u751F\u6210\u7684 dom \u52A8\u6001\u63D2\u5165\u5230\u6307\u4EE4\u4F5C\u7528\u7684 dom \u91CC\u9762</p><h4 id="\u76F8\u8F83\u4E8E\u65B9\u6848\u4E00\u7684\u4F18\u70B9" tabindex="-1">\u76F8\u8F83\u4E8E\u65B9\u6848\u4E00\u7684\u4F18\u70B9 <a class="header-anchor" href="#\u76F8\u8F83\u4E8E\u65B9\u6848\u4E00\u7684\u4F18\u70B9" aria-hidden="true">#</a></h4><ol><li>\u66F4\u52A0\u4F18\u96C5, \u4E0D\u9700\u8981\u53E6\u5916\u5199 <code>dom</code></li><li>\u62BD\u79BB\u5197\u4F59\u903B\u8F91, \u65B9\u4FBF\u5BF9\u7C7B\u4F3C\u9700\u6C42\u903B\u8F91\u7EDF\u4E00\u7BA1\u7406</li></ol><h4 id="\u5B9E\u73B0\u601D\u8DEF" tabindex="-1">\u5B9E\u73B0\u601D\u8DEF <a class="header-anchor" href="#\u5B9E\u73B0\u601D\u8DEF" aria-hidden="true">#</a></h4><p><strong><code>mounted</code> \u548C <code>updated</code> \u4E0E Vue2 \u5BF9\u5E94\u7684\u662F <code>inserted</code> \u548C <code>componentUpdated</code></strong></p><ul><li>\u4EE5 <code>loading</code> \u4E3A\u4F8B\uFF0C\u5728\u6570\u636E\u8FD8\u672A\u52A0\u8F7D\u5B8C\u4E4B\u524D\u663E\u793A\u6B63\u5728\u52A0\u8F7D\u7684\u5B57\u6837\u548C gif \u56FE</li><li>\u8003\u8651\u5230\u53EF\u80FD\u8981\u5B9E\u73B0\u591A\u4E2A\u76F8\u4F3C\u7684\u6307\u4EE4\uFF0C\u4F8B\u5982\u52A0\u8F7D\uFF0C\u65E0\u7ED3\u679C\u90FD\u53EF\u4EE5\u7528\u4E00\u6837\u7684\u5B9E\u73B0\u65B9\u5F0F\uFF0C\u6240\u4EE5\u5C31\u8981\u628A\u5177\u4F53\u903B\u8F91\u62BD\u79BB\u51FA\u6765\uFF0C\u9700\u8981\u7EC4\u4EF6\u4F5C\u4E3A\u53C2\u6570\uFF08Comp\uFF09</li><li>\u5728 <code>mounted</code>\u4E2D <ol><li>\u521B\u5EFA Comp \u5B9E\u4F8B\uFF0C\u5E76\u5B58\u5230\u53D8\u91CF <code>app</code></li><li>\u5C06\u5B9E\u4F8B\u6302\u8F7D\u5230\u65B0\u521B\u5EFA\u7684 dom \u4E0A\uFF0C\u5E76\u5B58\u5230\u53D8\u91CF <code>instance</code></li><li>\u5C06 <code>instance</code> \u8D4B\u7ED9 <code>el</code>\uFF0C\u8FD9\u4E2A <code>el</code> \u5C31\u662F <code>mounted</code>\u4E2D\u7684\u7B2C\u4E00\u4E2A\u53C2\u6570\uFF0C\u8868\u793A\u6307\u4EE4\u5F53\u524D\u6240\u5728\u5BF9\u8C61</li><li>\u5224\u65AD\u6307\u4EE4\u63A5\u6536\u7684\u503C\uFF0C\u5982\u679C\u4E3A true\uFF0C\u90A3\u4E48\u8868\u793A\u6B63\u5728\u52A0\u8F7D\uFF0C\u7136\u540E\u5C06 <code>loading.vue</code> \u901A\u8FC7 <code>appendChild</code> \u6DFB\u52A0\u5230 <code>el</code>\uFF1B\u5982\u679C\u4E3A false \u5219\u4E0D\u8FDB\u884C\u64CD\u4F5C</li></ol></li><li>\u5728 <code>updated</code> \u4E2D <ol><li><code>loading.vue</code> \u6709\u81EA\u5B9A\u4E49\u6587\u672C\u7684\u529F\u80FD\uFF0C\u901A\u8FC7 props \u5B9A\u4E49<code>title</code> \u5E76\u7ED9\u9ED8\u8BA4\u503C\uFF0C\u8FD9\u4E2A\u529F\u80FD\u662F\u53EF\u9009\u7684\uFF0C\u6240\u4EE5\u9700\u8981\u5224\u65AD\u6307\u4EE4\u662F\u5426\u6709\u53C2\u6570\uFF0C\u5982\u679C\u6709\u53C2\u6570\u5C31\u8BBE\u7F6E\u5C31\u8C03\u7528 el \u4E2D\u8BBE\u7F6E\u6587\u672C\u7684\u65B9\u6CD5\uFF0C\u5982\u679C\u6CA1\u6709\u53C2\u6570\u5C31\u4F7F\u7528\u9ED8\u8BA4\u6587\u672C</li><li>\u5224\u65AD\u65B0\u65E7\u503C\u662F\u5426\u76F8\u7B49\uFF0C\u5982\u679C\u4E0D\u76F8\u7B49\u5219\u7EE7\u7EED\u5224\u65AD\u503C\u4E3A true \u8FD8\u662F false <ul><li>true\uFF1A\u6DFB\u52A0 <code>loading.vue</code></li><li>false: \u79FB\u9664 <code>loading.vue</code></li></ul></li></ol></li></ul><h5 id="\u95EE\u9898" tabindex="-1">\u95EE\u9898 <a class="header-anchor" href="#\u95EE\u9898" aria-hidden="true">#</a></h5><ul><li>\u5F53\u4ECE\u4E00\u4E2A\u6307\u4EE4\u8F6C\u4E3A\u53E6\u4E00\u4E2A\u6307\u4EE4\u7684\u65F6\u5019\uFF0C\u4F1A\u62A5\u9519\uFF0C\u539F\u56E0\u662F\u5F53\u591A\u4E2A\u6307\u4EE4\u7528\u5728\u540C\u4E00\u4E2A dom \u4E0A,\u5C31\u4F1A\u8986\u76D6 instance,\u8FD9\u6837\u5C31\u4F1A\u5BFC\u81F4\u540E\u7EED\u64CD\u4F5C\u51FA\u73B0\u95EE\u9898</li><li>\u6BD4\u5982\u5F53 loading \u7ED3\u675F,\u9700\u8981\u5C55\u793A no-result \u7684\u65F6\u5019, remove \u65B9\u6CD5\u79FB\u9664\u7684\u662F no-result \u7EC4\u4EF6,\u6B64\u65F6 no-result \u8FD8\u672A\u521B\u5EFA,\u90A3\u4E48\u8FD9\u65F6\u5019\u5C31\u4F1A\u62A5\u9519</li><li>\u4E3A\u4E86\u533A\u5206\u6307\u4EE4\uFF0C\u9700\u8981\u4FDD\u5B58\u5B9E\u4F8B\u5230\u4E8C\u7EF4\u6570\u7EC4\u7A7A\u95F4\uFF0C\u4ECE\u800C\u4E0D\u8BA9\u4E0A\u4E00\u4E2A\u5B9E\u4F8B\u88AB\u8986\u76D6\u6389\uFF0C\u53EF\u4EE5\u901A\u8FC7\u7EC4\u4EF6\u5B9E\u4F8B\u7684 name \u5C5E\u6027\u6765\u4F5C\u4E3A\u533A\u5206\u7684\u6307\u4EE4\u7684 key</li></ul><h4 id="\u4EE3\u7801" tabindex="-1">\u4EE3\u7801: <a class="header-anchor" href="#\u4EE3\u7801" aria-hidden="true">#</a></h4><ol><li>\u628A\u521B\u9020 <code>directive</code> \u7684\u903B\u8F91\u62BD\u8C61\u51FA\u6765</li></ol><details class="details custom-block"><summary>create-loading-like-directive.js</summary><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">createApp</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vue</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">addClass</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">removeClass</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@/assets/js/dom</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> relativeCls </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">g-relative</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">createLoadingLikeDirective</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">Comp</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">		mounted</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">el</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">binding</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">			</span><span style="color:#676E95;font-style:italic;">// \u4E3AComp\u7EC4\u4EF6\u521B\u5EFAvue\u5B9E\u4F8B</span></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">app</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">createApp</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">Comp</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">			</span><span style="color:#676E95;font-style:italic;">// \u5C06\u5B9E\u4F8B\u6302\u8F7D\u5230\u65B0\u521B\u5EFA\u7684 dom</span></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">instance</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">app</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">mount</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createElement</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">div</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">))</span></span>
<span class="line"><span style="color:#89DDFF;">			</span><span style="color:#676E95;font-style:italic;">// \u83B7\u53D6\u7EC4\u4EF6\u5B9E\u4F8B\u7684 name \u5C5E\u6027</span></span>
<span class="line"><span style="color:#89DDFF;">			</span><span style="color:#676E95;font-style:italic;">// \u5F53\u591A\u4E2A\u6307\u4EE4\u7528\u5728\u540C\u4E00\u4E2A dom \u4E0A,\u5C31\u4F1A\u8986\u76D6 instance,\u8FD9\u6837\u5C31\u4F1A\u5BFC\u81F4\u540E\u7EED\u64CD\u4F5C\u51FA\u73B0\u95EE\u9898</span></span>
<span class="line"><span style="color:#89DDFF;">			</span><span style="color:#676E95;font-style:italic;">// \u6BD4\u5982\u5F53 loading \u7ED3\u675F,\u9700\u8981\u5C55\u793A no-result \u7684\u65F6\u5019, remove \u65B9\u6CD5\u79FB\u9664\u7684\u662F no-result \u7EC4\u4EF6,\u6B64\u65F6 no-result\u8FD8\u672A\u521B\u5EFA,\u90A3\u4E48\u8FD9\u65F6\u5019\u5C31\u4F1A\u62A5\u9519</span></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Comp</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name</span></span>
<span class="line"><span style="color:#89DDFF;">			</span><span style="color:#676E95;font-style:italic;">// \u521D\u59CB\u5316\u7EC4\u4EF6\u5B9E\u4F8B\u4E3A\u5BF9\u8C61</span></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">el</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;">]) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">				</span><span style="color:#A6ACCD;">el</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">			</span><span style="color:#676E95;font-style:italic;">// \u4E3A\u4E86\u533A\u5206\u6307\u4EE4,\u4FDD\u5B58\u5B9E\u4F8B\u5230\u4E8C\u7EF4\u6570\u7EC4\u7A7A\u95F4,\u4ECE\u800C\u4E0D\u8BA9\u4E0A\u4E00\u4E2A\u5B9E\u4F8B\u88AB\u8986\u76D6\u6389</span></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#A6ACCD;">el</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">instance</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">instance</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">binding</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">				</span><span style="color:#82AAFF;">append</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">el</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#F07178;">		updated</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">el</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">binding</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Comp</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name</span></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">title</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">binding</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">title</span></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">typeof</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">title</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">undefined</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">				</span><span style="color:#A6ACCD;">el</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">instance</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setTitle</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">title</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">binding</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">binding</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">oldValue</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">				</span><span style="color:#A6ACCD;">binding</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">?</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">append</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">el</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">remove</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">el</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">append</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">el</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Comp</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">style</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">getComputedStyle</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">el</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;font-style:italic;">// \u56E0\u4E3A\u7EC4\u4EF6\u662Fabsolute\u5B9A\u4F4D\uFF0C\u6240\u4EE5el\u9700\u8981\u9664\u4E86static\u4E4B\u5916\u7684\u5B9A\u4F4D\u4EE5\u4FDD\u8BC1loading\u5728\u4E2D\u95F4</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> ([</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">absolute</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">fixed</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">relative</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">indexOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">style</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">position</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#82AAFF;">addClass</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">el</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">relativeCls</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#A6ACCD;">el</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">appendChild</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">el</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">instance</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">$el</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">remove</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">el</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Comp</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#82AAFF;">removeClass</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">el</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">relativeCls</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#A6ACCD;">el</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">removeChild</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">el</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">instance</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">$el</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div></details><ol start="2"><li>\u56E0\u4E3A\u662F <code>dom</code> \u64CD\u4F5C, \u4E3A\u4E86\u628A\u76F8\u540C\u7684\u529F\u80FD\u90FD\u653E\u5728\u4E00\u8D77, \u6240\u4EE5\u62BD\u8C61\u51FA\u6765\u653E\u5728 <code>dom.js</code> \u91CC\u9762</li></ol><details class="details custom-block"><summary>dom.js</summary><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">addClass</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">el</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> className</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">el</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">classList</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">contains</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">className</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">el</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">classList</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">className</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">removeClass</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">el</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> className</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">el</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">classList</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">remove</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">className</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div></details><ol start="3"><li>\u4F7F\u7528 <code>createLoadingLikeDirective</code></li></ol><details class="details custom-block"><summary>directive.js</summary><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> Loading </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./loading</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> createLoadingLikeDirective </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@/assets/js/create-loading-like-directive</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> loadingDirective </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">createLoadingLikeDirective</span><span style="color:#A6ACCD;">(Loading)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> loadingDirective</span></span>
<span class="line"></span></code></pre></div></details><ol start="4"><li>\u5728 <code>main.js</code> \u6CE8\u518C\u6307\u4EE4</li></ol><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">createApp</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vue</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> App </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./App.vue</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> loadingDirective </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./components/base/loading/directive</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> noResultDirective </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./components/base/no-result/directive</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">createApp</span><span style="color:#A6ACCD;">(App)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">directive</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">loading</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> loadingDirective)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">directive</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">no-result</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> noResultDirective)</span></span>
<span class="line"></span></code></pre></div><ol start="5"><li>\u4F7F\u7528\u6307\u4EE4</li></ol><div class="language-vue"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">class</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">recommend</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">v-loading</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">loading</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#676E95;font-style:italic;">&lt;!-- ... --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">getRecommend</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@/service/recommend</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> Scroll </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@/components/base/scroll/scroll</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">recommend</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">data</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">			albums</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> []</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">created</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">getRecommend</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">albums</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">result</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">albums</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">computed</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#F07178;">loading</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!this.</span><span style="color:#A6ACCD;">sliders</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!this.</span><span style="color:#A6ACCD;">albums</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">components</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> Scroll </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div>`,28),e=[o];function t(c,r,y,F,D,i){return a(),n("div",null,e)}var d=s(p,[["render",t]]);export{C as __pageData,d as default};
